(function(){"use strict";var __webpack_modules__={864:function(){eval("// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODY0LmpzIiwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc2Nzcy9idGZnLnNjc3M/OGFjZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///864\n")},241:function(){eval('\n;// CONCATENATED MODULE: ./scripts/const.mjs\nvar MODULE_ID = \'babele-translation-files-generator\';\n;// CONCATENATED MODULE: ./scripts/exporters/abstract-exporter.mjs\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw new Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator.return && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw new Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, catch: function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }\nvar AbstractExporter = /*#__PURE__*/function () {\n  function AbstractExporter(pack, options) {\n    _classCallCheck(this, AbstractExporter);\n    _defineProperty(this, "options", {\n      sortEntries: false\n    });\n    _defineProperty(this, "dataset", {\n      label: \'\',\n      entries: {}\n    });\n    /**\n     * @typedef {CompendiumCollection}\n     */\n    _defineProperty(this, "pack", void 0);\n    if (this.constructor === AbstractExporter) {\n      throw new TypeError(\'Abstract class "AbstractExporter" cannot be instantiated directly\');\n    }\n    this.options = options;\n    this.pack = pack;\n    this.dataset.label = this.pack.metadata.label;\n  }\n  _createClass(AbstractExporter, [{\n    key: "export",\n    value: function () {\n      var _export2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              ui.notifications.info(game.i18n.format(\'BTFG.Exporter.PleaseWait\', {\n                label: this.pack.metadata.label\n              }));\n              _context.next = 3;\n              return this._processDataset();\n            case 3:\n              if (this.options.sortEntries) {\n                this._sortEntries();\n              }\n              this._downloadFile();\n            case 5:\n            case "end":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function _export() {\n        return _export2.apply(this, arguments);\n      }\n      return _export;\n    }()\n  }, {\n    key: "_processDataset",\n    value: function () {\n      var _processDataset2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              throw new Error(\'You must implement this function\');\n            case 1:\n            case "end":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      function _processDataset() {\n        return _processDataset2.apply(this, arguments);\n      }\n      return _processDataset;\n    }()\n  }, {\n    key: "_downloadFile",\n    value: function _downloadFile() {\n      ui.notifications.info(game.i18n.localize(\'BTFG.Exporter.ExportFinished\'));\n      saveDataToFile(JSON.stringify(this.dataset, null, 2), \'text/json\', "".concat(this.pack.metadata.id, ".json"));\n    }\n  }, {\n    key: "_sortEntries",\n    value: function _sortEntries() {\n      var _this = this;\n      this.dataset.entries = Object.keys(this.dataset.entries).sort().reduce(function (acc, key) {\n        return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, key, _this.dataset.entries[key]));\n      }, {});\n    }\n  }]);\n  return AbstractExporter;\n}();\n;// CONCATENATED MODULE: ./scripts/exporters/actor-exporter.mjs\nfunction actor_exporter_typeof(o) { "@babel/helpers - typeof"; return actor_exporter_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, actor_exporter_typeof(o); }\nfunction actor_exporter_regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ actor_exporter_regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == actor_exporter_typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw new Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator.return && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(actor_exporter_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw new Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, catch: function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction actor_exporter_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction actor_exporter_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { actor_exporter_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { actor_exporter_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\nfunction actor_exporter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nfunction actor_exporter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, actor_exporter_toPropertyKey(descriptor.key), descriptor); } }\nfunction actor_exporter_createClass(Constructor, protoProps, staticProps) { if (protoProps) actor_exporter_defineProperties(Constructor.prototype, protoProps); if (staticProps) actor_exporter_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }\nfunction actor_exporter_toPropertyKey(arg) { var key = actor_exporter_toPrimitive(arg, "string"); return actor_exporter_typeof(key) === "symbol" ? key : String(key); }\nfunction actor_exporter_toPrimitive(input, hint) { if (actor_exporter_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (actor_exporter_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (actor_exporter_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar ActorExporter = /*#__PURE__*/function (_AbstractExporter) {\n  _inherits(ActorExporter, _AbstractExporter);\n  var _super = _createSuper(ActorExporter);\n  function ActorExporter() {\n    actor_exporter_classCallCheck(this, ActorExporter);\n    return _super.apply(this, arguments);\n  }\n  actor_exporter_createClass(ActorExporter, [{\n    key: "_processDataset",\n    value: function () {\n      var _processDataset2 = actor_exporter_asyncToGenerator( /*#__PURE__*/actor_exporter_regeneratorRuntime().mark(function _callee() {\n        var _this = this;\n        var documents;\n        return actor_exporter_regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.pack.getDocuments();\n            case 2:\n              documents = _context.sent;\n              documents.forEach(function (_ref) {\n                var name = _ref.name,\n                  items = _ref.items,\n                  tokenName = _ref.prototypeToken.name;\n                var itemsDataset = {};\n                items.forEach(function (_ref2) {\n                  var name = _ref2.name;\n                  itemsDataset[name] = {\n                    name: name\n                  };\n                });\n                _this.dataset.entries[name] = {\n                  name: name,\n                  tokenName: tokenName,\n                  items: itemsDataset\n                };\n              });\n            case 4:\n            case "end":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function _processDataset() {\n        return _processDataset2.apply(this, arguments);\n      }\n      return _processDataset;\n    }()\n  }]);\n  return ActorExporter;\n}(AbstractExporter);\n;// CONCATENATED MODULE: ./scripts/exporters/adventure-exporter.mjs\nfunction adventure_exporter_typeof(o) { "@babel/helpers - typeof"; return adventure_exporter_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, adventure_exporter_typeof(o); }\nfunction adventure_exporter_regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ adventure_exporter_regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == adventure_exporter_typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw new Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator.return && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(adventure_exporter_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw new Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, catch: function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction adventure_exporter_defineProperty(obj, key, value) { key = adventure_exporter_toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction adventure_exporter_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction adventure_exporter_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { adventure_exporter_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { adventure_exporter_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\nfunction adventure_exporter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nfunction adventure_exporter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, adventure_exporter_toPropertyKey(descriptor.key), descriptor); } }\nfunction adventure_exporter_createClass(Constructor, protoProps, staticProps) { if (protoProps) adventure_exporter_defineProperties(Constructor.prototype, protoProps); if (staticProps) adventure_exporter_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }\nfunction adventure_exporter_toPropertyKey(arg) { var key = adventure_exporter_toPrimitive(arg, "string"); return adventure_exporter_typeof(key) === "symbol" ? key : String(key); }\nfunction adventure_exporter_toPrimitive(input, hint) { if (adventure_exporter_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (adventure_exporter_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }\nfunction adventure_exporter_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) adventure_exporter_setPrototypeOf(subClass, superClass); }\nfunction adventure_exporter_setPrototypeOf(o, p) { adventure_exporter_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return adventure_exporter_setPrototypeOf(o, p); }\nfunction adventure_exporter_createSuper(Derived) { var hasNativeReflectConstruct = adventure_exporter_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = adventure_exporter_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = adventure_exporter_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return adventure_exporter_possibleConstructorReturn(this, result); }; }\nfunction adventure_exporter_possibleConstructorReturn(self, call) { if (call && (adventure_exporter_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return adventure_exporter_assertThisInitialized(self); }\nfunction adventure_exporter_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\nfunction adventure_exporter_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction adventure_exporter_getPrototypeOf(o) { adventure_exporter_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return adventure_exporter_getPrototypeOf(o); }\n\nvar AdventureExporter = /*#__PURE__*/function (_AbstractExporter) {\n  adventure_exporter_inherits(AdventureExporter, _AbstractExporter);\n  var _super = adventure_exporter_createSuper(AdventureExporter);\n  function AdventureExporter() {\n    adventure_exporter_classCallCheck(this, AdventureExporter);\n    return _super.apply(this, arguments);\n  }\n  adventure_exporter_createClass(AdventureExporter, [{\n    key: "_processDataset",\n    value: function () {\n      var _processDataset2 = adventure_exporter_asyncToGenerator( /*#__PURE__*/adventure_exporter_regeneratorRuntime().mark(function _callee() {\n        var _this = this;\n        var avPack, key;\n        return adventure_exporter_regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.pack.getDocument(_toConsumableArray(this.pack.index)[0]._id);\n            case 2:\n              avPack = _context.sent;\n              this.dataset.entries = adventure_exporter_defineProperty({}, avPack.name, {\n                name: avPack.name,\n                description: avPack.description,\n                caption: avPack.caption,\n                scenes: {},\n                macros: {},\n                playlists: {},\n                actors: {},\n                items: {},\n                tables: {},\n                folders: {},\n                journals: {},\n                cards: {}\n              });\n\n              // Scenes\n              avPack.scenes.forEach(function (_ref) {\n                var name = _ref.name;\n                return _this.dataset.entries[avPack.name].scenes[name] = {\n                  name: name\n                };\n              });\n\n              // Macros\n              avPack.macros.forEach(function (_ref2) {\n                var name = _ref2.name;\n                return _this.dataset.entries[avPack.name].macros[name] = {\n                  name: name\n                };\n              });\n\n              // Playlists\n              avPack.playlists.forEach(function (_ref3) {\n                var name = _ref3.name,\n                  description = _ref3.description;\n                return _this.dataset.entries[avPack.name].playlists[name] = {\n                  name: name,\n                  description: description\n                };\n              });\n\n              // Actors\n              avPack.actors.forEach(function (_ref4) {\n                var name = _ref4.name;\n                return _this.dataset.entries[avPack.name].actors[name] = {\n                  name: name,\n                  tokenName: name\n                };\n              });\n\n              // Items\n              avPack.items.forEach(function (_ref5) {\n                var name = _ref5.name;\n                return _this.dataset.entries[avPack.name].items[name] = {\n                  name: name,\n                  id: name\n                };\n              });\n\n              // Tables\n              avPack.tables.forEach(function (_ref6) {\n                var name = _ref6.name,\n                  description = _ref6.description,\n                  results = _ref6.results;\n                var resultsDataset = {};\n                results.forEach(function (_ref7) {\n                  var range = _ref7.range,\n                    text = _ref7.text;\n                  return resultsDataset["".concat(range[0], "-").concat(range[1])] = text;\n                });\n                _this.dataset.entries[avPack.name].tables[name] = {\n                  name: name,\n                  description: description,\n                  results: resultsDataset\n                };\n              });\n\n              // Folders\n              avPack.folders.forEach(function (_ref8) {\n                var name = _ref8.name;\n                return _this.dataset.entries[avPack.name].folders[name] = name;\n              });\n\n              // Journals\n              avPack.journal.forEach(function (_ref9) {\n                var name = _ref9.name,\n                  pages = _ref9.pages;\n                var pagesDataset = {};\n                pages.forEach(function (_ref10) {\n                  var name = _ref10.name,\n                    text = _ref10.text.content;\n                  return pagesDataset[name] = {\n                    name: name,\n                    text: text\n                  };\n                });\n                _this.dataset.entries[avPack.name].journals[name] = {\n                  name: name,\n                  pages: pagesDataset\n                };\n              });\n\n              // Cards\n              avPack.cards.forEach(function (_ref11) {\n                var name = _ref11.name,\n                  description = _ref11.description,\n                  cards = _ref11.cards;\n                var cardsDataset = {};\n                cards.forEach(function (_ref12) {\n                  var name = _ref12.name,\n                    description = _ref12.description,\n                    faces = _ref12.faces,\n                    back = _ref12.back;\n                  return cardsDataset[name] = {\n                    name: name,\n                    description: description,\n                    back: back,\n                    faces: faces\n                  };\n                });\n                _this.dataset.entries[avPack.name].cards[name] = {\n                  name: name,\n                  description: description,\n                  cards: cardsDataset\n                };\n              });\n\n              // Remove empty collections\n              for (key in this.dataset.entries[avPack.name]) {\n                if (0 === Object.keys(this.dataset.entries[avPack.name][key]).length) {\n                  delete this.dataset.entries[avPack.name][key];\n                }\n              }\n            case 14:\n            case "end":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function _processDataset() {\n        return _processDataset2.apply(this, arguments);\n      }\n      return _processDataset;\n    }()\n  }]);\n  return AdventureExporter;\n}(AbstractExporter);\n;// CONCATENATED MODULE: ./scripts/exporters/cards-exporter.mjs\nfunction cards_exporter_typeof(o) { "@babel/helpers - typeof"; return cards_exporter_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, cards_exporter_typeof(o); }\nfunction cards_exporter_regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ cards_exporter_regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == cards_exporter_typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw new Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator.return && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(cards_exporter_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw new Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, catch: function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction cards_exporter_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction cards_exporter_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { cards_exporter_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { cards_exporter_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\nfunction cards_exporter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nfunction cards_exporter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, cards_exporter_toPropertyKey(descriptor.key), descriptor); } }\nfunction cards_exporter_createClass(Constructor, protoProps, staticProps) { if (protoProps) cards_exporter_defineProperties(Constructor.prototype, protoProps); if (staticProps) cards_exporter_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }\nfunction cards_exporter_toPropertyKey(arg) { var key = cards_exporter_toPrimitive(arg, "string"); return cards_exporter_typeof(key) === "symbol" ? key : String(key); }\nfunction cards_exporter_toPrimitive(input, hint) { if (cards_exporter_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (cards_exporter_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }\nfunction cards_exporter_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) cards_exporter_setPrototypeOf(subClass, superClass); }\nfunction cards_exporter_setPrototypeOf(o, p) { cards_exporter_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return cards_exporter_setPrototypeOf(o, p); }\nfunction cards_exporter_createSuper(Derived) { var hasNativeReflectConstruct = cards_exporter_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = cards_exporter_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = cards_exporter_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return cards_exporter_possibleConstructorReturn(this, result); }; }\nfunction cards_exporter_possibleConstructorReturn(self, call) { if (call && (cards_exporter_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return cards_exporter_assertThisInitialized(self); }\nfunction cards_exporter_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\nfunction cards_exporter_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction cards_exporter_getPrototypeOf(o) { cards_exporter_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return cards_exporter_getPrototypeOf(o); }\n\nvar CardsExporter = /*#__PURE__*/function (_AbstractExporter) {\n  cards_exporter_inherits(CardsExporter, _AbstractExporter);\n  var _super = cards_exporter_createSuper(CardsExporter);\n  function CardsExporter() {\n    cards_exporter_classCallCheck(this, CardsExporter);\n    return _super.apply(this, arguments);\n  }\n  cards_exporter_createClass(CardsExporter, [{\n    key: "_processDataset",\n    value: function () {\n      var _processDataset2 = cards_exporter_asyncToGenerator( /*#__PURE__*/cards_exporter_regeneratorRuntime().mark(function _callee() {\n        var _this = this;\n        var documents;\n        return cards_exporter_regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.pack.getDocuments();\n            case 2:\n              documents = _context.sent;\n              documents.forEach(function (_ref) {\n                var name = _ref.name,\n                  description = _ref.description,\n                  cards = _ref.cards;\n                var cardsDataset = {};\n                cards.forEach(function (_ref2) {\n                  var name = _ref2.name,\n                    description = _ref2.description,\n                    faces = _ref2.faces,\n                    back = _ref2.back;\n                  return cardsDataset[name] = {\n                    name: name,\n                    description: description,\n                    back: back,\n                    faces: faces\n                  };\n                });\n                _this.dataset.entries[name] = {\n                  name: name,\n                  description: description,\n                  cards: cardsDataset\n                };\n              });\n            case 4:\n            case "end":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function _processDataset() {\n        return _processDataset2.apply(this, arguments);\n      }\n      return _processDataset;\n    }()\n  }]);\n  return CardsExporter;\n}(AbstractExporter);\n;// CONCATENATED MODULE: ./scripts/exporters/item-exporter.mjs\nfunction item_exporter_typeof(o) { "@babel/helpers - typeof"; return item_exporter_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, item_exporter_typeof(o); }\nfunction item_exporter_regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ item_exporter_regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == item_exporter_typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw new Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator.return && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(item_exporter_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw new Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, catch: function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction item_exporter_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction item_exporter_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { item_exporter_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { item_exporter_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\nfunction item_exporter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nfunction item_exporter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, item_exporter_toPropertyKey(descriptor.key), descriptor); } }\nfunction item_exporter_createClass(Constructor, protoProps, staticProps) { if (protoProps) item_exporter_defineProperties(Constructor.prototype, protoProps); if (staticProps) item_exporter_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }\nfunction item_exporter_toPropertyKey(arg) { var key = item_exporter_toPrimitive(arg, "string"); return item_exporter_typeof(key) === "symbol" ? key : String(key); }\nfunction item_exporter_toPrimitive(input, hint) { if (item_exporter_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (item_exporter_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }\nfunction item_exporter_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) item_exporter_setPrototypeOf(subClass, superClass); }\nfunction item_exporter_setPrototypeOf(o, p) { item_exporter_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return item_exporter_setPrototypeOf(o, p); }\nfunction item_exporter_createSuper(Derived) { var hasNativeReflectConstruct = item_exporter_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = item_exporter_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = item_exporter_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return item_exporter_possibleConstructorReturn(this, result); }; }\nfunction item_exporter_possibleConstructorReturn(self, call) { if (call && (item_exporter_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return item_exporter_assertThisInitialized(self); }\nfunction item_exporter_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\nfunction item_exporter_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction item_exporter_getPrototypeOf(o) { item_exporter_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return item_exporter_getPrototypeOf(o); }\n\nvar ItemExporter = /*#__PURE__*/function (_AbstractExporter) {\n  item_exporter_inherits(ItemExporter, _AbstractExporter);\n  var _super = item_exporter_createSuper(ItemExporter);\n  function ItemExporter() {\n    item_exporter_classCallCheck(this, ItemExporter);\n    return _super.apply(this, arguments);\n  }\n  item_exporter_createClass(ItemExporter, [{\n    key: "_processDataset",\n    value: function () {\n      var _processDataset2 = item_exporter_asyncToGenerator( /*#__PURE__*/item_exporter_regeneratorRuntime().mark(function _callee() {\n        var _this = this;\n        var documents;\n        return item_exporter_regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.pack.getDocuments();\n            case 2:\n              documents = _context.sent;\n              documents.forEach(function (_ref) {\n                var name = _ref.name;\n                _this.dataset.entries[name] = {\n                  name: name\n                };\n              });\n            case 4:\n            case "end":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function _processDataset() {\n        return _processDataset2.apply(this, arguments);\n      }\n      return _processDataset;\n    }()\n  }]);\n  return ItemExporter;\n}(AbstractExporter);\n;// CONCATENATED MODULE: ./scripts/exporters/exporter-instanciator.mjs\nfunction exporter_instanciator_typeof(o) { "@babel/helpers - typeof"; return exporter_instanciator_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, exporter_instanciator_typeof(o); }\nfunction exporter_instanciator_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nfunction exporter_instanciator_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, exporter_instanciator_toPropertyKey(descriptor.key), descriptor); } }\nfunction exporter_instanciator_createClass(Constructor, protoProps, staticProps) { if (protoProps) exporter_instanciator_defineProperties(Constructor.prototype, protoProps); if (staticProps) exporter_instanciator_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }\nfunction exporter_instanciator_toPropertyKey(arg) { var key = exporter_instanciator_toPrimitive(arg, "string"); return exporter_instanciator_typeof(key) === "symbol" ? key : String(key); }\nfunction exporter_instanciator_toPrimitive(input, hint) { if (exporter_instanciator_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (exporter_instanciator_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }\n\n\n\n\nvar EXPORTERS = {\n  Actor: ActorExporter,\n  Adventure: AdventureExporter,\n  Cards: CardsExporter,\n  Item: ItemExporter\n};\nvar ExporterInstanciator = /*#__PURE__*/function () {\n  function ExporterInstanciator() {\n    exporter_instanciator_classCallCheck(this, ExporterInstanciator);\n  }\n  exporter_instanciator_createClass(ExporterInstanciator, null, [{\n    key: "createForPack",\n    value:\n    /**\n     * @param {CompendiumCollection} pack\n     * @param {*} options\n     * @returns {AbstractExporter}\n     */\n    function createForPack(pack, options) {\n      try {\n        return new EXPORTERS[pack.metadata.type](pack, options);\n      } catch (err) {\n        console.error("[BTFG] Exporter creation error: ".concat(err.toString()));\n        ui.notifications.error(game.i18n.format(\'BTFG.ExporterInstanciator.InvalidCompendium\', {\n          label: pack.metadata.label\n        }));\n      }\n    }\n  }]);\n  return ExporterInstanciator;\n}();\n;// CONCATENATED MODULE: ./scripts/app/compendium-exporter-app.mjs\nfunction compendium_exporter_app_typeof(o) { "@babel/helpers - typeof"; return compendium_exporter_app_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, compendium_exporter_app_typeof(o); }\nfunction compendium_exporter_app_regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ compendium_exporter_app_regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == compendium_exporter_app_typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw new Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator.return && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(compendium_exporter_app_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw new Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, catch: function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction compendium_exporter_app_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction compendium_exporter_app_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { compendium_exporter_app_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { compendium_exporter_app_asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\nfunction compendium_exporter_app_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nfunction compendium_exporter_app_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, compendium_exporter_app_toPropertyKey(descriptor.key), descriptor); } }\nfunction compendium_exporter_app_createClass(Constructor, protoProps, staticProps) { if (protoProps) compendium_exporter_app_defineProperties(Constructor.prototype, protoProps); if (staticProps) compendium_exporter_app_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }\nfunction _get() { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = compendium_exporter_app_getPrototypeOf(object); if (object === null) break; } return object; }\nfunction compendium_exporter_app_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) compendium_exporter_app_setPrototypeOf(subClass, superClass); }\nfunction compendium_exporter_app_setPrototypeOf(o, p) { compendium_exporter_app_setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return compendium_exporter_app_setPrototypeOf(o, p); }\nfunction compendium_exporter_app_createSuper(Derived) { var hasNativeReflectConstruct = compendium_exporter_app_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = compendium_exporter_app_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = compendium_exporter_app_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return compendium_exporter_app_possibleConstructorReturn(this, result); }; }\nfunction compendium_exporter_app_possibleConstructorReturn(self, call) { if (call && (compendium_exporter_app_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return compendium_exporter_app_assertThisInitialized(self); }\nfunction compendium_exporter_app_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\nfunction compendium_exporter_app_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction compendium_exporter_app_getPrototypeOf(o) { compendium_exporter_app_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return compendium_exporter_app_getPrototypeOf(o); }\nfunction compendium_exporter_app_defineProperty(obj, key, value) { key = compendium_exporter_app_toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction compendium_exporter_app_toPropertyKey(arg) { var key = compendium_exporter_app_toPrimitive(arg, "string"); return compendium_exporter_app_typeof(key) === "symbol" ? key : String(key); }\nfunction compendium_exporter_app_toPrimitive(input, hint) { if (compendium_exporter_app_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (compendium_exporter_app_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }\n\n\nvar CompendiumExporterApp = /*#__PURE__*/function (_FormApplication) {\n  compendium_exporter_app_inherits(CompendiumExporterApp, _FormApplication);\n  var _super = compendium_exporter_app_createSuper(CompendiumExporterApp);\n  function CompendiumExporterApp() {\n    var _this;\n    compendium_exporter_app_classCallCheck(this, CompendiumExporterApp);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    compendium_exporter_app_defineProperty(compendium_exporter_app_assertThisInitialized(_this), "packId", null);\n    return _this;\n  }\n  compendium_exporter_app_createClass(CompendiumExporterApp, [{\n    key: "getData",\n    value: function getData() {\n      var _game;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var context = _get(compendium_exporter_app_getPrototypeOf(CompendiumExporterApp.prototype), "getData", this).call(this, options);\n      if (this.packId) {\n        context.pack = this._getPack();\n      }\n      context.babeleActive = (_game = game) === null || _game === void 0 || (_game = _game.babele) === null || _game === void 0 ? void 0 : _game.initialized;\n      return context;\n    }\n  }, {\n    key: "activateListeners",\n    value: function activateListeners(html) {\n      _get(compendium_exporter_app_getPrototypeOf(CompendiumExporterApp.prototype), "activateListeners", this).call(this, html);\n      html.find(\'[data-cancel]\').click(this._onCancelChoice.bind(this));\n    }\n  }, {\n    key: "_onDrop",\n    value: function _onDrop(e) {\n      e.preventDefault();\n      var data = TextEditor.getDragEventData(e);\n      if (!data || \'Compendium\' !== (data === null || data === void 0 ? void 0 : data.type)) {\n        ui.notifications.error(game.i18n.localize(\'BTFG.CompendiumChooser.NotCompendium\'));\n        return;\n      }\n      this.packId = data.id;\n      this.render();\n    }\n  }, {\n    key: "_onCancelChoice",\n    value: function _onCancelChoice(e) {\n      e.preventDefault();\n      this.packId = null;\n      this.render();\n    }\n  }, {\n    key: "_updateObject",\n    value: function () {\n      var _updateObject2 = compendium_exporter_app_asyncToGenerator( /*#__PURE__*/compendium_exporter_app_regeneratorRuntime().mark(function _callee(e, formData) {\n        var pack, exporter;\n        return compendium_exporter_app_regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              pack = this._getPack();\n              if (!(null !== pack)) {\n                _context.next = 5;\n                break;\n              }\n              exporter = ExporterInstanciator.createForPack(pack, formData);\n              _context.next = 5;\n              return exporter.export();\n            case 5:\n              return _context.abrupt("return", Promise.resolve(undefined));\n            case 6:\n            case "end":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function _updateObject(_x, _x2) {\n        return _updateObject2.apply(this, arguments);\n      }\n      return _updateObject;\n    }()\n    /**\n     * @returns {CompendiumCollection|null}\n     * @private\n     */\n  }, {\n    key: "_getPack",\n    value: function _getPack() {\n      if (!this.packId) {\n        ui.notifications.error(game.i18n.localize(\'BTFG.CompendiumExporter.NoCompendiumId\'));\n        return null;\n      }\n      var pack = game.packs.get(this.packId);\n      if (!pack) {\n        ui.notifications.error(game.i18n.format(\'BTFG.CompendiumExporter.CompendiumNotFound\', {\n          id: this.packId\n        }));\n        return null;\n      }\n      return pack;\n    }\n  }], [{\n    key: "defaultOptions",\n    get: function get() {\n      return foundry.utils.mergeObject(_get(compendium_exporter_app_getPrototypeOf(CompendiumExporterApp), "defaultOptions", this), {\n        id: \'compendium-exporter\',\n        title: game.i18n.localize(\'BTFG.CompendiumExporter.Title\'),\n        template: "modules/".concat(MODULE_ID, "/templates/compendium-exporter.html.hbs"),\n        classes: [MODULE_ID, \'compendium-exporter-app\'],\n        width: 600,\n        height: 400,\n        dragDrop: [{\n          dragSelector: null,\n          dropSelector: \'.drop-zone\'\n        }]\n      });\n    }\n  }]);\n  return CompendiumExporterApp;\n}(FormApplication);\n;// CONCATENATED MODULE: ./scripts/helpers/handlebars.mjs\n\nfunction registerHandlebarsHelper() {\n  Handlebars.registerHelper(\'template\', function (path) {\n    return "modules/".concat(MODULE_ID, "/templates/").concat(path);\n  });\n}\n;// CONCATENATED MODULE: ./scripts/helpers/templates.mjs\n\n\n/**\n * Define a set of template paths to pre-load\n * Pre-loaded templates are compiled and cached for fast access when rendering\n */\nvar registerTemplates = function registerTemplates() {\n  loadTemplates(["modules/".concat(MODULE_ID, "/templates/_choose.html.hbs"), "modules/".concat(MODULE_ID, "/templates/_export.html.hbs")]);\n};\n;// CONCATENATED MODULE: ./scripts/btfg.mjs\n\n\n\nHooks.on(\'init\', function () {\n  console.log(\'BTFG | Initializing Module\');\n  registerHandlebarsHelper();\n  registerTemplates();\n});\nHooks.on(\'ready\', function () {\n  game.babeleFilesGenerator = {\n    api: {\n      compendiumExporter: new CompendiumExporterApp()\n    }\n  };\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQxLmpzIiwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7O0FDQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFhQTtBQUFBO0FBQUE7QUFYQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFBQTtBQUFBO0FBQUE7OztBQ25EQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7O0FDZEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7O0FDNUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7QUNaQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7OztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7OztBQzNCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFjQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBckZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBOztBQ2hCQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7O0FDWEE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9jb25zdC5tanM/MmJkNSIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2V4cG9ydGVycy9hYnN0cmFjdC1leHBvcnRlci5tanM/OTMyYSIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2V4cG9ydGVycy9hY3Rvci1leHBvcnRlci5tanM/OGNjNCIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2V4cG9ydGVycy9hZHZlbnR1cmUtZXhwb3J0ZXIubWpzPzVkNjciLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9leHBvcnRlcnMvY2FyZHMtZXhwb3J0ZXIubWpzPzgzZjQiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9leHBvcnRlcnMvaXRlbS1leHBvcnRlci5tanM/MzkxZCIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2V4cG9ydGVycy9leHBvcnRlci1pbnN0YW5jaWF0b3IubWpzPzkyN2MiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9hcHAvY29tcGVuZGl1bS1leHBvcnRlci1hcHAubWpzPzhiY2UiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9oZWxwZXJzL2hhbmRsZWJhcnMubWpzPzgwMjIiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9oZWxwZXJzL3RlbXBsYXRlcy5tanM/Y2I1OCIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2J0ZmcubWpzP2YwOGEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IE1PRFVMRV9JRCA9ICdiYWJlbGUtdHJhbnNsYXRpb24tZmlsZXMtZ2VuZXJhdG9yJztcbiIsImV4cG9ydCBjbGFzcyBBYnN0cmFjdEV4cG9ydGVyIHtcbiAgb3B0aW9ucyA9IHtcbiAgICBzb3J0RW50cmllczogZmFsc2UsXG4gIH07XG4gIGRhdGFzZXQgPSB7XG4gICAgbGFiZWw6ICcnLFxuICAgIGVudHJpZXM6IHt9LFxuICB9O1xuICAvKipcbiAgICogQHR5cGVkZWYge0NvbXBlbmRpdW1Db2xsZWN0aW9ufVxuICAgKi9cbiAgcGFjaztcblxuICBjb25zdHJ1Y3RvcihwYWNrLCBvcHRpb25zKSB7XG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IgPT09IEFic3RyYWN0RXhwb3J0ZXIpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Fic3RyYWN0IGNsYXNzIFwiQWJzdHJhY3RFeHBvcnRlclwiIGNhbm5vdCBiZSBpbnN0YW50aWF0ZWQgZGlyZWN0bHknKTtcbiAgICB9XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMucGFjayA9IHBhY2s7XG4gICAgdGhpcy5kYXRhc2V0LmxhYmVsID0gdGhpcy5wYWNrLm1ldGFkYXRhLmxhYmVsO1xuICB9XG5cbiAgYXN5bmMgZXhwb3J0KCkge1xuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhnYW1lLmkxOG4uZm9ybWF0KCdCVEZHLkV4cG9ydGVyLlBsZWFzZVdhaXQnLCB7IGxhYmVsOiB0aGlzLnBhY2subWV0YWRhdGEubGFiZWwgfSkpO1xuXG4gICAgYXdhaXQgdGhpcy5fcHJvY2Vzc0RhdGFzZXQoKTtcblxuICAgIGlmICh0aGlzLm9wdGlvbnMuc29ydEVudHJpZXMpIHtcbiAgICAgIHRoaXMuX3NvcnRFbnRyaWVzKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fZG93bmxvYWRGaWxlKCk7XG4gIH1cblxuICBhc3luYyBfcHJvY2Vzc0RhdGFzZXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBpbXBsZW1lbnQgdGhpcyBmdW5jdGlvbicpO1xuICB9XG5cbiAgX2Rvd25sb2FkRmlsZSgpIHtcbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmxvY2FsaXplKCdCVEZHLkV4cG9ydGVyLkV4cG9ydEZpbmlzaGVkJykpO1xuXG4gICAgc2F2ZURhdGFUb0ZpbGUoSlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhc2V0LCBudWxsLCAyKSwgJ3RleHQvanNvbicsIGAke3RoaXMucGFjay5tZXRhZGF0YS5pZH0uanNvbmApO1xuICB9XG5cbiAgX3NvcnRFbnRyaWVzKCkge1xuICAgIHRoaXMuZGF0YXNldC5lbnRyaWVzID0gT2JqZWN0LmtleXModGhpcy5kYXRhc2V0LmVudHJpZXMpXG4gICAgICAuc29ydCgpXG4gICAgICAucmVkdWNlKChhY2MsIGtleSkgPT4gKHtcbiAgICAgICAgLi4uYWNjLFxuICAgICAgICBba2V5XTogdGhpcy5kYXRhc2V0LmVudHJpZXNba2V5XSxcbiAgICAgIH0pLCB7fSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEFic3RyYWN0RXhwb3J0ZXIgfSBmcm9tICcuL2Fic3RyYWN0LWV4cG9ydGVyLm1qcyc7XG5cbmV4cG9ydCBjbGFzcyBBY3RvckV4cG9ydGVyIGV4dGVuZHMgQWJzdHJhY3RFeHBvcnRlciB7XG4gIGFzeW5jIF9wcm9jZXNzRGF0YXNldCgpIHtcbiAgICBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCB0aGlzLnBhY2suZ2V0RG9jdW1lbnRzKCk7XG5cbiAgICBkb2N1bWVudHMuZm9yRWFjaCgoeyBuYW1lLCBpdGVtcywgcHJvdG90eXBlVG9rZW46IHsgbmFtZTogdG9rZW5OYW1lIH0gfSkgPT4ge1xuICAgICAgY29uc3QgaXRlbXNEYXRhc2V0ID0ge307XG5cbiAgICAgIGl0ZW1zLmZvckVhY2goKHsgbmFtZSB9KSA9PiB7XG4gICAgICAgIGl0ZW1zRGF0YXNldFtuYW1lXSA9IHsgbmFtZSB9O1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuZGF0YXNldC5lbnRyaWVzW25hbWVdID0geyBuYW1lLCB0b2tlbk5hbWUsIGl0ZW1zOiBpdGVtc0RhdGFzZXQgfTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQWJzdHJhY3RFeHBvcnRlciB9IGZyb20gJy4vYWJzdHJhY3QtZXhwb3J0ZXIubWpzJztcblxuZXhwb3J0IGNsYXNzIEFkdmVudHVyZUV4cG9ydGVyIGV4dGVuZHMgQWJzdHJhY3RFeHBvcnRlciB7XG4gIGFzeW5jIF9wcm9jZXNzRGF0YXNldCgpIHtcbiAgICBjb25zdCBhdlBhY2sgPSBhd2FpdCB0aGlzLnBhY2suZ2V0RG9jdW1lbnQoWy4uLnRoaXMucGFjay5pbmRleF1bMF0uX2lkKTtcblxuICAgIHRoaXMuZGF0YXNldC5lbnRyaWVzID0ge1xuICAgICAgW2F2UGFjay5uYW1lXToge1xuICAgICAgICBuYW1lOiBhdlBhY2submFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGF2UGFjay5kZXNjcmlwdGlvbixcbiAgICAgICAgY2FwdGlvbjogYXZQYWNrLmNhcHRpb24sXG4gICAgICAgIHNjZW5lczoge30sXG4gICAgICAgIG1hY3Jvczoge30sXG4gICAgICAgIHBsYXlsaXN0czoge30sXG4gICAgICAgIGFjdG9yczoge30sXG4gICAgICAgIGl0ZW1zOiB7fSxcbiAgICAgICAgdGFibGVzOiB7fSxcbiAgICAgICAgZm9sZGVyczoge30sXG4gICAgICAgIGpvdXJuYWxzOiB7fSxcbiAgICAgICAgY2FyZHM6IHt9LFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgLy8gU2NlbmVzXG4gICAgYXZQYWNrLnNjZW5lcy5mb3JFYWNoKCh7IG5hbWUgfSkgPT4gdGhpcy5kYXRhc2V0LmVudHJpZXNbYXZQYWNrLm5hbWVdLnNjZW5lc1tuYW1lXSA9IHsgbmFtZSB9KTtcblxuICAgIC8vIE1hY3Jvc1xuICAgIGF2UGFjay5tYWNyb3MuZm9yRWFjaCgoeyBuYW1lIH0pID0+IHRoaXMuZGF0YXNldC5lbnRyaWVzW2F2UGFjay5uYW1lXS5tYWNyb3NbbmFtZV0gPSB7IG5hbWUgfSk7XG5cbiAgICAvLyBQbGF5bGlzdHNcbiAgICBhdlBhY2sucGxheWxpc3RzLmZvckVhY2goKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkgPT4gdGhpcy5kYXRhc2V0LmVudHJpZXNbYXZQYWNrLm5hbWVdLnBsYXlsaXN0c1tuYW1lXSA9IHtcbiAgICAgIG5hbWUsXG4gICAgICBkZXNjcmlwdGlvbixcbiAgICB9KTtcblxuICAgIC8vIEFjdG9yc1xuICAgIGF2UGFjay5hY3RvcnMuZm9yRWFjaCgoeyBuYW1lIH0pID0+IHRoaXMuZGF0YXNldC5lbnRyaWVzW2F2UGFjay5uYW1lXS5hY3RvcnNbbmFtZV0gPSB7IG5hbWUsIHRva2VuTmFtZTogbmFtZSB9KTtcblxuICAgIC8vIEl0ZW1zXG4gICAgYXZQYWNrLml0ZW1zLmZvckVhY2goKHsgbmFtZSB9KSA9PiB0aGlzLmRhdGFzZXQuZW50cmllc1thdlBhY2submFtZV0uaXRlbXNbbmFtZV0gPSB7IG5hbWUsIGlkOiBuYW1lIH0pO1xuXG4gICAgLy8gVGFibGVzXG4gICAgYXZQYWNrLnRhYmxlcy5mb3JFYWNoKCh7IG5hbWUsIGRlc2NyaXB0aW9uLCByZXN1bHRzIH0pID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdHNEYXRhc2V0ID0ge307XG5cbiAgICAgIHJlc3VsdHMuZm9yRWFjaCgoeyByYW5nZSwgdGV4dCB9KSA9PiByZXN1bHRzRGF0YXNldFtgJHtyYW5nZVswXX0tJHtyYW5nZVsxXX1gXSA9IHRleHQpO1xuXG4gICAgICB0aGlzLmRhdGFzZXQuZW50cmllc1thdlBhY2submFtZV0udGFibGVzW25hbWVdID0geyBuYW1lLCBkZXNjcmlwdGlvbiwgcmVzdWx0czogcmVzdWx0c0RhdGFzZXQgfTtcbiAgICB9KTtcblxuICAgIC8vIEZvbGRlcnNcbiAgICBhdlBhY2suZm9sZGVycy5mb3JFYWNoKCh7IG5hbWUgfSkgPT4gdGhpcy5kYXRhc2V0LmVudHJpZXNbYXZQYWNrLm5hbWVdLmZvbGRlcnNbbmFtZV0gPSBuYW1lKTtcblxuICAgIC8vIEpvdXJuYWxzXG4gICAgYXZQYWNrLmpvdXJuYWwuZm9yRWFjaCgoeyBuYW1lLCBwYWdlcyB9KSA9PiB7XG4gICAgICBjb25zdCBwYWdlc0RhdGFzZXQgPSB7fTtcblxuICAgICAgcGFnZXMuZm9yRWFjaCgoeyBuYW1lLCB0ZXh0OiB7IGNvbnRlbnQ6IHRleHQgfSB9KSA9PiBwYWdlc0RhdGFzZXRbbmFtZV0gPSB7IG5hbWUsIHRleHQgfSk7XG5cbiAgICAgIHRoaXMuZGF0YXNldC5lbnRyaWVzW2F2UGFjay5uYW1lXS5qb3VybmFsc1tuYW1lXSA9IHsgbmFtZSwgcGFnZXM6IHBhZ2VzRGF0YXNldCB9O1xuICAgIH0pO1xuXG4gICAgLy8gQ2FyZHNcbiAgICBhdlBhY2suY2FyZHMuZm9yRWFjaCgoeyBuYW1lLCBkZXNjcmlwdGlvbiwgY2FyZHMgfSkgPT4ge1xuICAgICAgY29uc3QgY2FyZHNEYXRhc2V0ID0ge307XG5cbiAgICAgIGNhcmRzLmZvckVhY2goKHsgbmFtZSwgZGVzY3JpcHRpb24sIGZhY2VzLCBiYWNrIH0pID0+IGNhcmRzRGF0YXNldFtuYW1lXSA9IHsgbmFtZSwgZGVzY3JpcHRpb24sIGJhY2ssIGZhY2VzIH0pO1xuXG4gICAgICB0aGlzLmRhdGFzZXQuZW50cmllc1thdlBhY2submFtZV0uY2FyZHNbbmFtZV0gPSB7IG5hbWUsIGRlc2NyaXB0aW9uLCBjYXJkczogY2FyZHNEYXRhc2V0IH07XG4gICAgfSk7XG5cbiAgICAvLyBSZW1vdmUgZW1wdHkgY29sbGVjdGlvbnNcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLmRhdGFzZXQuZW50cmllc1thdlBhY2submFtZV0pIHtcbiAgICAgIGlmICgwID09PSBPYmplY3Qua2V5cyh0aGlzLmRhdGFzZXQuZW50cmllc1thdlBhY2submFtZV1ba2V5XSkubGVuZ3RoKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmRhdGFzZXQuZW50cmllc1thdlBhY2submFtZV1ba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IEFic3RyYWN0RXhwb3J0ZXIgfSBmcm9tICcuL2Fic3RyYWN0LWV4cG9ydGVyLm1qcyc7XG5cbmV4cG9ydCBjbGFzcyBDYXJkc0V4cG9ydGVyIGV4dGVuZHMgQWJzdHJhY3RFeHBvcnRlciB7XG4gIGFzeW5jIF9wcm9jZXNzRGF0YXNldCgpIHtcbiAgICBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCB0aGlzLnBhY2suZ2V0RG9jdW1lbnRzKCk7XG5cbiAgICBkb2N1bWVudHMuZm9yRWFjaCgoeyBuYW1lLCBkZXNjcmlwdGlvbiwgY2FyZHMgfSkgPT4ge1xuICAgICAgY29uc3QgY2FyZHNEYXRhc2V0ID0ge307XG5cbiAgICAgIGNhcmRzLmZvckVhY2goKHsgbmFtZSwgZGVzY3JpcHRpb24sIGZhY2VzLCBiYWNrIH0pID0+IGNhcmRzRGF0YXNldFtuYW1lXSA9IHsgbmFtZSwgZGVzY3JpcHRpb24sIGJhY2ssIGZhY2VzIH0pO1xuXG4gICAgICB0aGlzLmRhdGFzZXQuZW50cmllc1tuYW1lXSA9IHsgbmFtZSwgZGVzY3JpcHRpb24sIGNhcmRzOiBjYXJkc0RhdGFzZXQgfTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQWJzdHJhY3RFeHBvcnRlciB9IGZyb20gJy4vYWJzdHJhY3QtZXhwb3J0ZXIubWpzJztcblxuZXhwb3J0IGNsYXNzIEl0ZW1FeHBvcnRlciBleHRlbmRzIEFic3RyYWN0RXhwb3J0ZXIge1xuICBhc3luYyBfcHJvY2Vzc0RhdGFzZXQoKSB7XG4gICAgY29uc3QgZG9jdW1lbnRzID0gYXdhaXQgdGhpcy5wYWNrLmdldERvY3VtZW50cygpO1xuXG4gICAgZG9jdW1lbnRzLmZvckVhY2goKHsgbmFtZSB9KSA9PiB7XG4gICAgICB0aGlzLmRhdGFzZXQuZW50cmllc1tuYW1lXSA9IHsgbmFtZSB9O1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBBY3RvckV4cG9ydGVyIH0gZnJvbSAnLi9hY3Rvci1leHBvcnRlci5tanMnO1xuaW1wb3J0IHsgQWR2ZW50dXJlRXhwb3J0ZXIgfSBmcm9tICcuL2FkdmVudHVyZS1leHBvcnRlci5tanMnO1xuaW1wb3J0IHsgQ2FyZHNFeHBvcnRlciB9IGZyb20gJy4vY2FyZHMtZXhwb3J0ZXIubWpzJztcbmltcG9ydCB7IEl0ZW1FeHBvcnRlciB9IGZyb20gJy4vaXRlbS1leHBvcnRlci5tanMnO1xuXG5jb25zdCBFWFBPUlRFUlMgPSB7XG4gIEFjdG9yOiBBY3RvckV4cG9ydGVyLFxuICBBZHZlbnR1cmU6IEFkdmVudHVyZUV4cG9ydGVyLFxuICBDYXJkczogQ2FyZHNFeHBvcnRlcixcbiAgSXRlbTogSXRlbUV4cG9ydGVyLFxufTtcblxuZXhwb3J0IGNsYXNzIEV4cG9ydGVySW5zdGFuY2lhdG9yIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7Q29tcGVuZGl1bUNvbGxlY3Rpb259IHBhY2tcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zXG4gICAqIEByZXR1cm5zIHtBYnN0cmFjdEV4cG9ydGVyfVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUZvclBhY2socGFjaywgb3B0aW9ucykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gbmV3IEVYUE9SVEVSU1twYWNrLm1ldGFkYXRhLnR5cGVdKHBhY2ssIG9wdGlvbnMpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihgW0JURkddIEV4cG9ydGVyIGNyZWF0aW9uIGVycm9yOiAke2Vyci50b1N0cmluZygpfWApO1xuXG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5mb3JtYXQoJ0JURkcuRXhwb3J0ZXJJbnN0YW5jaWF0b3IuSW52YWxpZENvbXBlbmRpdW0nLCB7XG4gICAgICAgIGxhYmVsOiBwYWNrLm1ldGFkYXRhLmxhYmVsLFxuICAgICAgfSkpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgQlRGRyBmcm9tICcuLi9jb25zdC5tanMnO1xuaW1wb3J0IHsgRXhwb3J0ZXJJbnN0YW5jaWF0b3IgfSBmcm9tICcuLi9leHBvcnRlcnMvZXhwb3J0ZXItaW5zdGFuY2lhdG9yLm1qcyc7XG5cbmV4cG9ydCBjbGFzcyBDb21wZW5kaXVtRXhwb3J0ZXJBcHAgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBwYWNrSWQgPSBudWxsO1xuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGlkOiAnY29tcGVuZGl1bS1leHBvcnRlcicsXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdCVEZHLkNvbXBlbmRpdW1FeHBvcnRlci5UaXRsZScpLFxuICAgICAgdGVtcGxhdGU6IGBtb2R1bGVzLyR7QlRGRy5NT0RVTEVfSUR9L3RlbXBsYXRlcy9jb21wZW5kaXVtLWV4cG9ydGVyLmh0bWwuaGJzYCxcbiAgICAgIGNsYXNzZXM6IFtCVEZHLk1PRFVMRV9JRCwgJ2NvbXBlbmRpdW0tZXhwb3J0ZXItYXBwJ10sXG4gICAgICB3aWR0aDogNjAwLFxuICAgICAgaGVpZ2h0OiA0MDAsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiBudWxsLCBkcm9wU2VsZWN0b3I6ICcuZHJvcC16b25lJyB9XSxcbiAgICB9KTtcbiAgfVxuXG4gIGdldERhdGEob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgY29udGV4dCA9IHN1cGVyLmdldERhdGEob3B0aW9ucyk7XG5cbiAgICBpZiAodGhpcy5wYWNrSWQpIHtcbiAgICAgIGNvbnRleHQucGFjayA9IHRoaXMuX2dldFBhY2soKTtcbiAgICB9XG5cbiAgICBjb250ZXh0LmJhYmVsZUFjdGl2ZSA9IGdhbWU/LmJhYmVsZT8uaW5pdGlhbGl6ZWQ7XG5cbiAgICByZXR1cm4gY29udGV4dDtcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKTtcblxuICAgIGh0bWwuZmluZCgnW2RhdGEtY2FuY2VsXScpLmNsaWNrKHRoaXMuX29uQ2FuY2VsQ2hvaWNlLmJpbmQodGhpcykpO1xuICB9XG5cbiAgX29uRHJvcChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgZGF0YSA9IFRleHRFZGl0b3IuZ2V0RHJhZ0V2ZW50RGF0YShlKTtcblxuICAgIGlmICghZGF0YSB8fCAnQ29tcGVuZGl1bScgIT09IGRhdGE/LnR5cGUpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdCVEZHLkNvbXBlbmRpdW1DaG9vc2VyLk5vdENvbXBlbmRpdW0nKSk7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnBhY2tJZCA9IGRhdGEuaWQ7XG5cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgX29uQ2FuY2VsQ2hvaWNlKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLnBhY2tJZCA9IG51bGw7XG5cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdChlLCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHBhY2sgPSB0aGlzLl9nZXRQYWNrKCk7XG4gICAgaWYgKG51bGwgIT09IHBhY2spIHtcbiAgICAgIGNvbnN0IGV4cG9ydGVyID0gRXhwb3J0ZXJJbnN0YW5jaWF0b3IuY3JlYXRlRm9yUGFjayhwYWNrLCBmb3JtRGF0YSk7XG5cbiAgICAgIGF3YWl0IGV4cG9ydGVyLmV4cG9ydCgpO1xuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodW5kZWZpbmVkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Q29tcGVuZGl1bUNvbGxlY3Rpb258bnVsbH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9nZXRQYWNrKCkge1xuICAgIGlmICghdGhpcy5wYWNrSWQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdCVEZHLkNvbXBlbmRpdW1FeHBvcnRlci5Ob0NvbXBlbmRpdW1JZCcpKTtcblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcGFjayA9IGdhbWUucGFja3MuZ2V0KHRoaXMucGFja0lkKTtcbiAgICBpZiAoIXBhY2spIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmZvcm1hdCgnQlRGRy5Db21wZW5kaXVtRXhwb3J0ZXIuQ29tcGVuZGl1bU5vdEZvdW5kJywge1xuICAgICAgICBpZDogdGhpcy5wYWNrSWQsXG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBwYWNrO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBCVEZHIGZyb20gJy4uL2NvbnN0Lm1qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckhhbmRsZWJhcnNIZWxwZXIoKSB7XG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3RlbXBsYXRlJywgZnVuY3Rpb24gKHBhdGgpIHtcbiAgICByZXR1cm4gYG1vZHVsZXMvJHtCVEZHLk1PRFVMRV9JRH0vdGVtcGxhdGVzLyR7cGF0aH1gO1xuICB9KTtcbn1cbiIsImltcG9ydCAqIGFzIEJURkcgZnJvbSAnLi4vY29uc3QubWpzJztcblxuLyoqXG4gKiBEZWZpbmUgYSBzZXQgb2YgdGVtcGxhdGUgcGF0aHMgdG8gcHJlLWxvYWRcbiAqIFByZS1sb2FkZWQgdGVtcGxhdGVzIGFyZSBjb21waWxlZCBhbmQgY2FjaGVkIGZvciBmYXN0IGFjY2VzcyB3aGVuIHJlbmRlcmluZ1xuICovXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJUZW1wbGF0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gIGxvYWRUZW1wbGF0ZXMoW1xuICAgIGBtb2R1bGVzLyR7QlRGRy5NT0RVTEVfSUR9L3RlbXBsYXRlcy9fY2hvb3NlLmh0bWwuaGJzYCxcbiAgICBgbW9kdWxlcy8ke0JURkcuTU9EVUxFX0lEfS90ZW1wbGF0ZXMvX2V4cG9ydC5odG1sLmhic2AsXG4gIF0pO1xufTtcbiIsImltcG9ydCB7IENvbXBlbmRpdW1FeHBvcnRlckFwcCB9IGZyb20gJy4vYXBwL2NvbXBlbmRpdW0tZXhwb3J0ZXItYXBwLm1qcyc7XG5pbXBvcnQgeyByZWdpc3RlckhhbmRsZWJhcnNIZWxwZXIgfSBmcm9tICcuL2hlbHBlcnMvaGFuZGxlYmFycy5tanMnO1xuaW1wb3J0IHsgcmVnaXN0ZXJUZW1wbGF0ZXMgfSBmcm9tICcuL2hlbHBlcnMvdGVtcGxhdGVzLm1qcyc7XG5cbkhvb2tzLm9uKCdpbml0JywgKCkgPT4ge1xuICBjb25zb2xlLmxvZygnQlRGRyB8IEluaXRpYWxpemluZyBNb2R1bGUnKTtcblxuICByZWdpc3RlckhhbmRsZWJhcnNIZWxwZXIoKTtcbiAgcmVnaXN0ZXJUZW1wbGF0ZXMoKTtcbn0pO1xuXG5Ib29rcy5vbigncmVhZHknLCAoKSA9PiB7XG4gIGdhbWUuYmFiZWxlRmlsZXNHZW5lcmF0b3IgPSB7XG4gICAgYXBpOiB7XG4gICAgICBjb21wZW5kaXVtRXhwb3J0ZXI6IG5ldyBDb21wZW5kaXVtRXhwb3J0ZXJBcHAoKSxcbiAgICB9LFxuICB9O1xufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///241\n')}};__webpack_modules__[241]();var __webpack_exports__={};__webpack_modules__[864]()})();